# file: docs/contract/ERC20/ERC20.openapi.yaml
# Generated by: contract-spec-generator skill

openapi: 3.0.3
info:
  title: "ERC20 Solidityインターフェース"
  version: "1.0.0"
  description: |
    ERC20コントラクトのSolidityインターフェースをOpenAPI形式で表現した仕様書です。

    このコントラクトは以下のコントラクトを継承しています。

    Context, IERC20, IERC20Metadata, IERC20Errors

    ERC20トークン標準の実装です。転送、承認、残高追跡などの代替可能トークンの基本機能を提供します。

tags:
  - name: Read Functions
    description: コントラクトの状態を変更せずに情報を取得する関数です。
  - name: Write Functions
    description: コントラクトの状態を変更する関数です。
  - name: Events
  - name: Errors

x-tagGroups:
  - name: 関数
    tags:
      - Read Functions
      - Write Functions
  - name: イベント・エラー
    tags:
      - Events
      - Errors

paths:
  /name:
    get:
      tags:
        - Read Functions
      summary: "name"
      description: |
        トークンの名前を返します。

        ERC20Metadata標準関数です。
      operationId: name
      responses:
        "200":
          description: "正常完了時のレスポンス。"
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    description: "トークン名 (Solidity: string)。"
                    example: "MyToken"

  /symbol:
    get:
      tags:
        - Read Functions
      summary: "symbol"
      description: |
        トークンのシンボルを返します。通常は名前の短縮版です。

        ERC20Metadata標準関数です。
      operationId: symbol
      responses:
        "200":
          description: "正常完了時のレスポンス。"
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    description: "トークンシンボル (Solidity: string)。"
                    example: "MTK"

  /decimals:
    get:
      tags:
        - Read Functions
      summary: "decimals"
      description: |
        ユーザー表示用の小数点桁数を返します。

        例えば、`decimals`が`2`の場合、`505`トークンの残高はユーザーに`5.05`（`505 / 10 ** 2`）として表示されるべきです。

        トークンは通常18の値を選択し、EtherとWeiの関係を模倣しています。これがこの関数が返すデフォルト値です。

        この情報は表示目的のみに使用され、コントラクトの算術には一切影響しません。
      operationId: decimals
      responses:
        "200":
          description: "正常完了時のレスポンス。"
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                    minimum: 0
                    maximum: 255
                    description: "小数点桁数 (Solidity: uint8)。"
                    example: 18

  /totalSupply:
    get:
      tags:
        - Read Functions
      summary: "totalSupply"
      description: |
        存在するトークンの総供給量を返します。

        ERC20標準関数です。
      operationId: totalSupply
      responses:
        "200":
          description: "正常完了時のレスポンス。"
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    description: "トークン総供給量 (Solidity: uint256)。"
                    example: "1000000000000000000000000"

  /balanceOf:
    get:
      tags:
        - Read Functions
      summary: "balanceOf"
      description: |
        指定されたアカウントのトークン残高を返します。

        ERC20標準関数です。
      operationId: balanceOf
      parameters:
        - name: account
          in: query
          required: true
          schema:
            type: string
            pattern: "^0x[0-9a-fA-F]{40}$"
          description: "残高を照会するアドレス (Solidity: address)。"
          example: "0x1234567890123456789012345678901234567890"
      responses:
        "200":
          description: "正常完了時のレスポンス。"
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    description: "トークン残高 (Solidity: uint256)。"
                    example: "1000000000000000000"

  /allowance:
    get:
      tags:
        - Read Functions
      summary: "allowance"
      description: |
        transferFromを通じて`spender`が`owner`の代わりに使用できる残りのトークン数を返します。

        ERC20標準関数です。
      operationId: allowance
      parameters:
        - name: owner
          in: query
          required: true
          schema:
            type: string
            pattern: "^0x[0-9a-fA-F]{40}$"
          description: "トークンを所有するアドレス (Solidity: address)。"
          example: "0x1234567890123456789012345678901234567890"
        - name: spender
          in: query
          required: true
          schema:
            type: string
            pattern: "^0x[0-9a-fA-F]{40}$"
          description: "トークンの使用を承認されたアドレス (Solidity: address)。"
          example: "0x0987654321098765432109876543210987654321"
      responses:
        "200":
          description: "正常完了時のレスポンス。"
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: string
                    description: "残りの許可量 (Solidity: uint256)。"
                    example: "500000000000000000000"

  /transfer:
    post:
      tags:
        - Write Functions
      summary: "transfer"
      description: |
        呼び出し元のアカウントから`to`に`value`量のトークンを移動します。

        操作が成功したかどうかを示すブール値を返します。

        この関数はTransferを発行する可能性があります。

        **要件:**
        - `to`はゼロアドレスであってはなりません。
        - 呼び出し元は少なくとも`value`の残高を持っている必要があります。
      operationId: transfer
      parameters:
        - name: to
          in: query
          required: true
          schema:
            type: string
            pattern: "^0x[0-9a-fA-F]{40}$"
          description: "受信者アドレス (Solidity: address)。"
          example: "0x0987654321098765432109876543210987654321"
        - name: value
          in: query
          required: true
          schema:
            type: string
          description: "転送するトークン量 (Solidity: uint256)。"
          example: "1000000000000000000"
      responses:
        "200":
          description: "正常完了時のレスポンス。"
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: boolean
                    description: "転送が成功した場合trueを返す (Solidity: bool)。"
                    example: true
        "500":
          description: |
            この関数で発生する可能性のあるエラー一覧。

            ・ERC20InvalidSender

            ・ERC20InvalidReceiver

            ・ERC20InsufficientBalance
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                ERC20InvalidSender:
                  summary: "ERC20InvalidSender"
                  description: "送信者アドレスが`address(0)`の場合に返されます。送信者が無効であることを示します。"
                  value:
                    message: "ERC20InvalidSender"
                    data:
                      sender: "0x0000000000000000000000000000000000000000"
                ERC20InvalidReceiver:
                  summary: "ERC20InvalidReceiver"
                  description: "`to`が`address(0)`の場合に返されます。受信者が無効であることを示します。"
                  value:
                    message: "ERC20InvalidReceiver"
                    data:
                      receiver: "0x0000000000000000000000000000000000000000"
                ERC20InsufficientBalance:
                  summary: "ERC20InsufficientBalance"
                  description: "呼び出し元の残高が`value`未満の場合に返されます。転送に必要な残高が不足していることを示します。"
                  value:
                    message: "ERC20InsufficientBalance"
                    data:
                      sender: "0x1234567890123456789012345678901234567890"
                      balance: "100"
                      needed: "1000"

  /approve:
    post:
      tags:
        - Write Functions
      summary: "approve"
      description: |
        呼び出し元のトークンに対する`spender`の許可量として`value`量のトークンを設定します。

        操作が成功したかどうかを示すブール値を返します。

        `value`が最大の`uint256`の場合、transferFromで許可量は更新されません。これは無限の承認と意味的に同等です。

        この関数はApprovalを発行する可能性があります。

        **要件:**
        - `spender`はゼロアドレスであってはなりません。
      operationId: approve
      parameters:
        - name: spender
          in: query
          required: true
          schema:
            type: string
            pattern: "^0x[0-9a-fA-F]{40}$"
          description: "トークンの使用を承認するアドレス (Solidity: address)。"
          example: "0x0987654321098765432109876543210987654321"
        - name: value
          in: query
          required: true
          schema:
            type: string
          description: "承認するトークン量 (Solidity: uint256)。"
          example: "1000000000000000000"
      responses:
        "200":
          description: "正常完了時のレスポンス。"
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: boolean
                    description: "承認が成功した場合trueを返す (Solidity: bool)。"
                    example: true
        "500":
          description: |
            この関数で発生する可能性のあるエラー一覧。

            ・ERC20InvalidApprover

            ・ERC20InvalidSpender
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                ERC20InvalidApprover:
                  summary: "ERC20InvalidApprover"
                  description: "承認者（所有者）が`address(0)`の場合に返されます。承認者が無効であることを示します。"
                  value:
                    message: "ERC20InvalidApprover"
                    data:
                      approver: "0x0000000000000000000000000000000000000000"
                ERC20InvalidSpender:
                  summary: "ERC20InvalidSpender"
                  description: "`spender`が`address(0)`の場合に返されます。spenderが無効であることを示します。"
                  value:
                    message: "ERC20InvalidSpender"
                    data:
                      spender: "0x0000000000000000000000000000000000000000"

  /transferFrom:
    post:
      tags:
        - Write Functions
      summary: "transferFrom"
      description: |
        許可メカニズムを使用して`from`から`to`に`value`量のトークンを移動します。`value`は呼び出し元の許可量から差し引かれます。

        操作が成功したかどうかを示すブール値を返します。

        現在の許可量が最大の`uint256`の場合、許可量は更新されません。

        この関数はTransferを発行する可能性があります。

        **要件:**
        - `from`と`to`はゼロアドレスであってはなりません。
        - `from`は少なくとも`value`の残高を持っている必要があります。
        - 呼び出し元は`from`のトークンに対して少なくとも`value`の許可量を持っている必要があります。
      operationId: transferFrom
      parameters:
        - name: from
          in: query
          required: true
          schema:
            type: string
            pattern: "^0x[0-9a-fA-F]{40}$"
          description: "トークンの転送元アドレス (Solidity: address)。"
          example: "0x1234567890123456789012345678901234567890"
        - name: to
          in: query
          required: true
          schema:
            type: string
            pattern: "^0x[0-9a-fA-F]{40}$"
          description: "受信者アドレス (Solidity: address)。"
          example: "0x0987654321098765432109876543210987654321"
        - name: value
          in: query
          required: true
          schema:
            type: string
          description: "転送するトークン量 (Solidity: uint256)。"
          example: "1000000000000000000"
      responses:
        "200":
          description: "正常完了時のレスポンス。"
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: boolean
                    description: "転送が成功した場合trueを返す (Solidity: bool)。"
                    example: true
        "500":
          description: |
            この関数で発生する可能性のあるエラー一覧。

            ・ERC20InvalidSender

            ・ERC20InvalidReceiver

            ・ERC20InsufficientBalance

            ・ERC20InsufficientAllowance

            ・ERC20InvalidApprover

            ・ERC20InvalidSpender
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                ERC20InvalidSender:
                  summary: "ERC20InvalidSender"
                  description: "`from`が`address(0)`の場合に返されます。送信者が無効であることを示します。"
                  value:
                    message: "ERC20InvalidSender"
                    data:
                      sender: "0x0000000000000000000000000000000000000000"
                ERC20InvalidReceiver:
                  summary: "ERC20InvalidReceiver"
                  description: "`to`が`address(0)`の場合に返されます。受信者が無効であることを示します。"
                  value:
                    message: "ERC20InvalidReceiver"
                    data:
                      receiver: "0x0000000000000000000000000000000000000000"
                ERC20InsufficientBalance:
                  summary: "ERC20InsufficientBalance"
                  description: "`from`の残高が`value`未満の場合に返されます。転送に必要な残高が不足していることを示します。"
                  value:
                    message: "ERC20InsufficientBalance"
                    data:
                      sender: "0x1234567890123456789012345678901234567890"
                      balance: "100"
                      needed: "1000"
                ERC20InsufficientAllowance:
                  summary: "ERC20InsufficientAllowance"
                  description: "呼び出し元の許可量が`value`未満の場合に返されます。許可量が不足していることを示します。"
                  value:
                    message: "ERC20InsufficientAllowance"
                    data:
                      spender: "0xabcdef1234567890abcdef1234567890abcdef12"
                      allowance: "100"
                      needed: "1000"
                ERC20InvalidApprover:
                  summary: "ERC20InvalidApprover"
                  description: "内部承認更新時に承認者（所有者）が`address(0)`の場合に返されます。承認者が無効であることを示します。"
                  value:
                    message: "ERC20InvalidApprover"
                    data:
                      approver: "0x0000000000000000000000000000000000000000"
                ERC20InvalidSpender:
                  summary: "ERC20InvalidSpender"
                  description: "内部承認更新時に`spender`が`address(0)`の場合に返されます。spenderが無効であることを示します。"
                  value:
                    message: "ERC20InvalidSpender"
                    data:
                      spender: "0x0000000000000000000000000000000000000000"

  /events/Transfer:
    get:
      tags:
        - Events
      summary: "Transfer"
      description: |
        `value`トークンが1つのアカウント（`from`）から別のアカウント（`to`）に移動されたときに発行されます。

        `value`がゼロの場合もあります。

        ERC20標準イベントです。
      operationId: event_Transfer
      responses:
        "200":
          description: "イベントスキーマ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransferEvent"

  /events/Approval:
    get:
      tags:
        - Events
      summary: "Approval"
      description: |
        approveの呼び出しによって`owner`の`spender`に対する許可量が設定されたときに発行されます。`value`は新しい許可量です。

        ERC20標準イベントです。
      operationId: event_Approval
      responses:
        "200":
          description: "イベントスキーマ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApprovalEvent"

  /errors/ERC20InsufficientBalance:
    get:
      tags:
        - Errors
      summary: "ERC20InsufficientBalance"
      description: |
        送信者の現在の残高に関連するエラーを示します。転送で使用されます。
      operationId: error_ERC20InsufficientBalance
      responses:
        "200":
          description: "エラースキーマ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ERC20InsufficientBalanceError"

  /errors/ERC20InvalidSender:
    get:
      tags:
        - Errors
      summary: "ERC20InvalidSender"
      description: |
        トークン送信者の失敗を示します。転送で使用されます。
      operationId: error_ERC20InvalidSender
      responses:
        "200":
          description: "エラースキーマ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ERC20InvalidSenderError"

  /errors/ERC20InvalidReceiver:
    get:
      tags:
        - Errors
      summary: "ERC20InvalidReceiver"
      description: |
        トークン受信者の失敗を示します。転送で使用されます。
      operationId: error_ERC20InvalidReceiver
      responses:
        "200":
          description: "エラースキーマ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ERC20InvalidReceiverError"

  /errors/ERC20InsufficientAllowance:
    get:
      tags:
        - Errors
      summary: "ERC20InsufficientAllowance"
      description: |
        spenderの許可量の失敗を示します。転送で使用されます。
      operationId: error_ERC20InsufficientAllowance
      responses:
        "200":
          description: "エラースキーマ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ERC20InsufficientAllowanceError"

  /errors/ERC20InvalidApprover:
    get:
      tags:
        - Errors
      summary: "ERC20InvalidApprover"
      description: |
        承認されるトークンの承認者の失敗を示します。承認で使用されます。
      operationId: error_ERC20InvalidApprover
      responses:
        "200":
          description: "エラースキーマ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ERC20InvalidApproverError"

  /errors/ERC20InvalidSpender:
    get:
      tags:
        - Errors
      summary: "ERC20InvalidSpender"
      description: |
        承認されるspenderの失敗を示します。承認で使用されます。
      operationId: error_ERC20InvalidSpender
      responses:
        "200":
          description: "エラースキーマ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ERC20InvalidSpenderError"

components:
  schemas:
    ErrorResponse:
      type: object
      description: "コントラクト呼び出し時のエラー情報を表現する共通スキーマ。"
      properties:
        message:
          type: string
          description: "カスタムエラー名またはrevert/requireメッセージ文字列をそのまま格納します。"
        data:
          type: object
          description: "追加情報（オプション）。"

    TransferEvent:
      type: object
      description: "トークンが転送されたときに発行されます。ゼロ値の転送を含みます。"
      properties:
        from:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "indexed: true。トークンの転送元アドレス (Solidity: address)。"
        to:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "indexed: true。トークンの転送先アドレス (Solidity: address)。"
        value:
          type: string
          description: "indexed: false。転送されたトークン量 (Solidity: uint256)。"

    ApprovalEvent:
      type: object
      description: "所有者のspenderに対する許可量が設定されたときに発行されます。"
      properties:
        owner:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "indexed: true。トークンを所有するアドレス (Solidity: address)。"
        spender:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "indexed: true。使用を承認されたアドレス (Solidity: address)。"
        value:
          type: string
          description: "indexed: false。新しい許可量 (Solidity: uint256)。"

    ERC20InsufficientBalanceError:
      type: object
      description: "送信者の現在の残高に関連するエラーを示します。"
      properties:
        sender:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "残高不足のアドレス (Solidity: address)。"
        balance:
          type: string
          description: "現在の残高 (Solidity: uint256)。"
        needed:
          type: string
          description: "必要な残高 (Solidity: uint256)。"

    ERC20InvalidSenderError:
      type: object
      description: "トークン送信者の失敗を示します。"
      properties:
        sender:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "無効な送信者アドレス (Solidity: address)。"

    ERC20InvalidReceiverError:
      type: object
      description: "トークン受信者の失敗を示します。"
      properties:
        receiver:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "無効な受信者アドレス (Solidity: address)。"

    ERC20InsufficientAllowanceError:
      type: object
      description: "spenderの許可量の失敗を示します。"
      properties:
        spender:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "許可量不足のspenderアドレス (Solidity: address)。"
        allowance:
          type: string
          description: "現在の許可量 (Solidity: uint256)。"
        needed:
          type: string
          description: "必要な許可量 (Solidity: uint256)。"

    ERC20InvalidApproverError:
      type: object
      description: "トークンの承認者の失敗を示します。"
      properties:
        approver:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "無効な承認者アドレス (Solidity: address)。"

    ERC20InvalidSpenderError:
      type: object
      description: "承認されるspenderの失敗を示します。"
      properties:
        spender:
          type: string
          pattern: "^0x[0-9a-fA-F]{40}$"
          description: "無効なspenderアドレス (Solidity: address)。"
