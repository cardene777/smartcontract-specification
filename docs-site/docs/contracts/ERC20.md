---
sidebar_position: 1
---

# ERC20

> **[📋 API仕様書を見る](/api/ERC20)**

## 概要

ERC20トークン標準の実装です。転送、承認、残高追跡などの代替可能トークンの基本機能を提供します。

### 継承関係

このコントラクトは以下のコントラクトを継承しています：

- `Context`
- `IERC20`
- `IERC20Metadata`
- `IERC20Errors`

## 主要機能

### トークン転送

`transfer`と`transferFrom`関数を使用して、アカウント間でトークンを転送できます。`transfer`は直接転送、`transferFrom`は承認された第三者による転送を可能にします。

### 承認メカニズム

`approve`関数により、他のアドレスに対してトークンの使用許可を与えることができます。これにより、DEX（分散型取引所）などのスマートコントラクトがユーザーの代わりにトークンを転送できます。

### 残高照会

`balanceOf`関数で特定のアドレスのトークン残高を、`totalSupply`関数でトークンの総供給量を確認できます。

## 関数一覧

<details>
<summary><strong>変数 (4)</strong></summary>

| 関数名 | 説明 |
|--------|------|
| [`name`](#name) | トークンの名前を返します。 |
| [`symbol`](#symbol) | トークンのシンボルを返します。 |
| [`decimals`](#decimals) | ユーザー表示用の小数点桁数を返します。 |
| [`totalSupply`](#totalsupply) | 存在するトークンの総供給量を返します。 |

### name

トークンの名前を返します。

ERC20Metadata標準関数です。

**戻り値:**

| 名前 | 型 | 説明 |
|------|-----|------|
| `result` | `string` | トークン名を返します。 |

---

### symbol

トークンのシンボルを返します。通常は名前の短縮版です。

ERC20Metadata標準関数です。

**戻り値:**

| 名前 | 型 | 説明 |
|------|-----|------|
| `result` | `string` | トークンシンボルを返します。 |

---

### decimals

ユーザー表示用の小数点桁数を返します。

例えば、`decimals`が`2`の場合、`505`トークンの残高はユーザーに`5.05`（`505 / 10 ** 2`）として表示されるべきです。

トークンは通常18の値を選択し、EtherとWeiの関係を模倣しています。これがこの関数が返すデフォルト値です。

この情報は表示目的のみに使用され、コントラクトの算術には一切影響しません。

**戻り値:**

| 名前 | 型 | 説明 |
|------|-----|------|
| `result` | `uint8` | 小数点桁数を返します。 |

---

### totalSupply

存在するトークンの総供給量を返します。

ERC20標準関数です。

**戻り値:**

| 名前 | 型 | 説明 |
|------|-----|------|
| `result` | `uint256` | トークン総供給量を返します。 |

---

</details>

<details>
<summary><strong>Mapping (2)</strong></summary>

| 関数名 | 説明 |
|--------|------|
| [`balanceOf`](#balanceof) | 指定されたアカウントのトークン残高を返します。 |
| [`allowance`](#allowance) | spenderがownerの代わりに使用できる残りのトークン数を返します。 |

### balanceOf

指定されたアカウントのトークン残高を返します。

ERC20標準関数です。

**パラメータ:**

| 名前 | 型 | 必須 | 説明 |
|------|-----|------|------|
| `account` | `address` | ✓ | 残高を照会するアドレスを指定します。 |

**戻り値:**

| 名前 | 型 | 説明 |
|------|-----|------|
| `result` | `uint256` | トークン残高を返します。 |

---

### allowance

`transferFrom`を通じて`spender`が`owner`の代わりに使用できる残りのトークン数を返します。

ERC20標準関数です。

**パラメータ:**

| 名前 | 型 | 必須 | 説明 |
|------|-----|------|------|
| `owner` | `address` | ✓ | トークンを所有するアドレスを指定します。 |
| `spender` | `address` | ✓ | トークンの使用を承認されたアドレスを指定します。 |

**戻り値:**

| 名前 | 型 | 説明 |
|------|-----|------|
| `result` | `uint256` | 残りの許可量を返します。 |

---

</details>

<details>
<summary><strong>書き込み関数 (3)</strong></summary>

| 関数名 | 説明 |
|--------|------|
| [`transfer`](#transfer) | 呼び出し元のアカウントから指定アドレスにトークンを移動します。 |
| [`approve`](#approve) | spenderの許可量を設定します。 |
| [`transferFrom`](#transferfrom) | 許可メカニズムを使用してトークンを移動します。 |

### transfer

呼び出し元のアカウントから`to`に`value`量のトークンを移動します。

操作が成功したかどうかを示すブール値を返します。

**要件:**
- `to`はゼロアドレスであってはなりません。
- 呼び出し元は少なくとも`value`の残高を持っている必要があります。

**パラメータ:**

| 名前 | 型 | 必須 | 説明 |
|------|-----|------|------|
| `to` | `address` | ✓ | 受信者アドレスを指定します。 |
| `value` | `uint256` | ✓ | 転送するトークン量を指定します。 |

**戻り値:**

| 名前 | 型 | 説明 |
|------|-----|------|
| `result` | `bool` | 転送が成功した場合trueを返します。 |

**使用例:**

```solidity
contract.transfer(to, value);
```

---

### approve

呼び出し元のトークンに対する`spender`の許可量として`value`量のトークンを設定します。

操作が成功したかどうかを示すブール値を返します。

`value`が最大の`uint256`の場合、`transferFrom`で許可量は更新されません。これは無限の承認と意味的に同等です。

**要件:**
- `spender`はゼロアドレスであってはなりません。

**パラメータ:**

| 名前 | 型 | 必須 | 説明 |
|------|-----|------|------|
| `spender` | `address` | ✓ | トークンの使用を承認するアドレスを指定します。 |
| `value` | `uint256` | ✓ | 承認するトークン量を指定します。 |

**戻り値:**

| 名前 | 型 | 説明 |
|------|-----|------|
| `result` | `bool` | 承認が成功した場合trueを返します。 |

**使用例:**

```solidity
contract.approve(spender, value);
```

---

### transferFrom

許可メカニズムを使用して`from`から`to`に`value`量のトークンを移動します。`value`は呼び出し元の許可量から差し引かれます。

操作が成功したかどうかを示すブール値を返します。

現在の許可量が最大の`uint256`の場合、許可量は更新されません。

**要件:**
- `from`と`to`はゼロアドレスであってはなりません。
- `from`は少なくとも`value`の残高を持っている必要があります。
- 呼び出し元は`from`のトークンに対して少なくとも`value`の許可量を持っている必要があります。

**パラメータ:**

| 名前 | 型 | 必須 | 説明 |
|------|-----|------|------|
| `from` | `address` | ✓ | トークンの転送元アドレスを指定します。 |
| `to` | `address` | ✓ | 受信者アドレスを指定します。 |
| `value` | `uint256` | ✓ | 転送するトークン量を指定します。 |

**戻り値:**

| 名前 | 型 | 説明 |
|------|-----|------|
| `result` | `bool` | 転送が成功した場合trueを返します。 |

**使用例:**

```solidity
contract.transferFrom(from, to, value);
```

---

</details>

<details>
<summary><strong>イベント (2)</strong></summary>

### events/Transfer

`value`トークンが1つのアカウント（`from`）から別のアカウント（`to`）に移動されたときに発行されます。

`value`がゼロの場合もあります。

ERC20標準イベントです。

| パラメータ | 型 | indexed | 説明 |
|-----------|-----|---------|------|
| `from` | `address` | ✓ | トークンの転送元アドレス |
| `to` | `address` | ✓ | トークンの転送先アドレス |
| `value` | `uint256` | | 転送されたトークン量 |

---

### events/Approval

`approve`の呼び出しによって`owner`の`spender`に対する許可量が設定されたときに発行されます。`value`は新しい許可量です。

ERC20標準イベントです。

| パラメータ | 型 | indexed | 説明 |
|-----------|-----|---------|------|
| `owner` | `address` | ✓ | トークンを所有するアドレス |
| `spender` | `address` | ✓ | 使用を承認されたアドレス |
| `value` | `uint256` | | 新しい許可量 |

---

</details>

<details>
<summary><strong>エラー (6)</strong></summary>

| エラー名 | 説明 |
|----------|------|
| `ERC20InsufficientBalance` | 送信者の現在の残高に関連するエラーを示します。転送で使用されます。 |
| `ERC20InvalidSender` | トークン送信者の失敗を示します。送信者が`address(0)`の場合に発生します。 |
| `ERC20InvalidReceiver` | トークン受信者の失敗を示します。受信者が`address(0)`の場合に発生します。 |
| `ERC20InsufficientAllowance` | spenderの許可量の失敗を示します。許可量が不足している場合に発生します。 |
| `ERC20InvalidApprover` | 承認されるトークンの承認者の失敗を示します。承認者が`address(0)`の場合に発生します。 |
| `ERC20InvalidSpender` | 承認されるspenderの失敗を示します。spenderが`address(0)`の場合に発生します。 |

</details>
